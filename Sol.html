<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>جدول الخطة العسكرية 24/7</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f6f9;
      padding: 20px;
    }
    h2, h3 {
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 8px;
      margin-bottom: 20px;
      overflow: hidden;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
      font-size: 14px;
    }
    th {
      background: #2c3e50;
      color: white;
    }
    input[type="number"] {
      width: 80px;
      padding: 5px;
      text-align: center;
    }
    button {
      padding: 6px 12px;
      font-size: 13px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 2px;
    }
    .submit-btn { background: #27ae60; color: white; }
    .save-btn { background: #2980b9; color: white; }
    .clear-btn { background: #c0392b; color: white; }
    #results, #history {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h2>📋 جدول الخطة العسكرية 24/7</h2>

<table>
  <thead>
    <tr>
      <th>رقم الجولة</th><th>الفترة</th><th>نوع الجولة</th><th>الرهان</th><th>عدد المربعات</th><th>الربح المتوقع</th><th>الوقت</th><th>الربح</th><th>الخسارة</th><th>تسجيل</th>
    </tr>
  </thead>
  <tbody id="table-body"></tbody>
</table>

<div id="results">
  <h3>📌 نتائج الجولات</h3>
  <div id="round-results"></div>
  <p id="total-profit"></p>
  <p id="total-loss"></p>
  <p id="net-profit"></p>
  <p id="win-count"></p>
  <p id="loss-count"></p>
  <button class="save-btn" onclick="saveToJSON()">💾 حفظ النتائج</button>
  <button class="clear-btn" onclick="clearPageResults()">🧹 مسح الصفحة فقط</button>
</div>

<div id="history">
  <h3>📚 أرشيف الأيام السابقة</h3>
  <div id="daily-history"></div>
</div>

<script>
const rounds = [
  [1,"فترة التمويه الأولى","مشاة","$0.50",1,"0.05$","03:00 AM"],
  [2,"فترة التمويه الأولى","مشاة","$0.50",1,"0.05$","03:03 AM"],
  [3,"فترة التمويه الأولى","مشاة","$0.50",1,"0.05$","03:06 AM"],
  [4,"فترة التمويه الأولى","مشاة","$0.50",1,"0.05$","03:09 AM"],
  [5,"فترة التمويه الأولى","فرسان","$3.00",3,"1.5$ – 5.0$","03:12 AM"],
  [6,"فترة الذهب الصباحي","فرسان","$4.00",3,"1.5$ – 5.0$","08:00 AM"],
  [7,"فترة الذهب الصباحي","فرسان","$4.00",3,"1.5$ – 5.0$","08:06 AM"],
  [8,"فترة الذهب الصباحي","شبحية","$1.50",2,"0.30$ – 0.50$","08:12 AM"],
  [9,"فترة العصر الحاسم","فرسان","$5.00",3,"1.5$ – 5.0$","03:00 PM"],
  [10,"فترة العصر الحاسم","فرسان","$5.00",3,"1.5$ – 5.0$","03:06 PM"],
  [11,"فترة العصر الحاسم","فرسان","$5.00",3,"1.5$ – 5.0$","03:12 PM"],
  [12,"فترة العصر الحاسم","فرسان","$5.00",3,"1.5$ – 5.0$","03:18 PM"],
  [13,"فترة العصر الحاسم","مشاة","$0.50",1,"0.05$","03:24 PM"],
  [14,"فترة العصر الحاسم","مشاة","$0.50",1,"0.05$","03:27 PM"],
  [15,"فترة الليل الهادئ","فرسان","$6.00",3,"1.5$ – 5.0$","09:00 PM"],
  [16,"فترة الليل الهادئ","فرسان","$6.00",3,"1.5$ – 5.0$","09:06 PM"],
  [17,"فترة الليل الهادئ","شبحية","$2.00",2,"0.30$ – 0.50$","09:12 PM"]
];

let logs = [], savedDays = [];

function loadHistory() {
  const saved = localStorage.getItem("militaryHistory");
  if (saved) {
    savedDays = JSON.parse(saved);
    renderHistory();
  }
}

function renderHistory() {
  const container = document.getElementById("daily-history");
  container.innerHTML = "";
  savedDays.forEach((day, i) => {
    const p = document.createElement("p");
    p.textContent = `📆 يوم ${i+1}: الربح ${day.totalProfit}$ | الخسارة ${day.totalLoss}$ | الصافي ${day.netProfit}$ | ✅ ${day.winCount} | ❌ ${day.lossCount}`;
    container.appendChild(p);
  });
}

function generateTable() {
  const body = document.getElementById("table-body");
  rounds.forEach(([id, time, type, bet, squares, profit, when]) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${id}</td><td>${time}</td><td>${type}</td><td>${bet}</td><td>${squares}</td><td>${profit}</td><td>${when}</td>
      <td><input type="number" id="p_${id}" step="0.01"></td>
      <td><input type="number" id="l_${id}" step="0.01"></td>
      <td><button class="submit-btn" onclick="submitRound(${id})">📤 تسجيل</button></td>
    `;
    body.appendChild(tr);
  });
}

function submitRound(i) {
  const p = parseFloat(document.getElementById(`p_${i}`).value) || 0;
  const l = parseFloat(document.getElementById(`l_${i}`).value) || 0;
  logs.push({ round: i, profit: p, loss: l });

  const div = document.getElementById("round-results");
  const line = document.createElement("p");
  line.textContent = `رقم الجولة ${i} ➤ الربح: ${p}$ | الخسارة: ${l}$`;
  div.appendChild(line);

  updateSummary();
}

function updateSummary() {
  let tp = 0, tl = 0, win = 0, loss = 0;
  logs.forEach(log => {
    tp += log.profit;
    tl += log.loss;
    if (log.profit > log.loss) win++;
    else if (log.loss > log.profit) loss++;
  });

  document.getElementById("total-profit").textContent = `📈 إجمالي الأرباح: ${tp.toFixed(2)}$`;
  document.getElementById("total-loss").textContent = `📉 إجمالي الخسائر: ${tl.toFixed(2)}$`;
  document.getElementById("net-profit").textContent = `💰 الربح الصافي: ${(tp - tl).toFixed(2)}$`;
  document.getElementById("win-count").textContent = `✅ الجولات الرابحة: ${win}`;
  document.getElementById("loss-count").textContent = `❌ الجولات الخاسرة: ${loss}`;
}

function saveToJSON() {
  let tp = 0, tl = 0, win = 0, loss = 0;
  logs.forEach(log => {
    tp += log.profit;
    tl += log.loss;
    if (log.profit > log.loss) win++;
    else if (log.loss > log.profit) loss++;
  });

  savedDays.push({
    totalProfit: tp.toFixed(2),
    totalLoss: tl.toFixed(2),
    netProfit: (tp - tl).toFixed(2),
    winCount: win,
    lossCount: loss
  });

  localStorage.setItem("militaryHistory", JSON.stringify(savedDays));
  renderHistory();
}

function clearPageResults() {
  logs = [];
  document.getElementById("round-results").innerHTML = "";
  document.querySelectorAll("input").forEach(el => el.value = "");
  updateSummary();
}

generateTable();
loadHistory();
</script>

</body>
</html>
